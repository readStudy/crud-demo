<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<title>Demo</title>
<style type="text/css">
table, th, td {
	border: 1px solid black;
	border-collapse: collapse;
}
</style>
<script src="https://code.jquery.com/jquery-3.5.1.js"
	integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
	crossorigin="anonymous"></script>
</head>
<body>
	<h1>User 列表</h1>
	<a href=/user/add>添加User</a>
	<br>
	<a href=/list>分頁與搜尋</a>
	<table>
		<thead>
			<tr>
				<th>ID</th>
				<th>username</th>
				<th>Email</th>
				<th>操作</th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="user : ${users}">
				<td th:text="${user.getId()}"></td>
				<td th:text="${user.getUsername()}"></td>
				<td th:text="${user.getEmail()}"></td>
				<td><a th:href="@{/user/edit(id=${user.getId()})}">修改</a> 
				    <a href="#" th:onclick="|deleteUser('${user.getId()}')|">刪除</a></td>
			</tr>
		</tbody>
	</table>
</body>

<script>
	
</script>

<script th:inline="javascript">
	function deleteUser(id) {
		var check = confirm("確定刪除 id= " + id + " 的資料嗎?");
		if (check == true) {
			$.ajax({
				type : "POST",
				url : "/user/delete?id="+id,
			    success : function(data) {
			    	location.href = '/';
			    }
			});
		}
	}
</script>

</html>